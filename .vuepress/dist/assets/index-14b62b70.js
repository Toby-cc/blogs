import{a1 as I,x as N,l as p,m as U,a6 as h,v as z,I as j,r as F,a as c,o as b,c as x,k,f as P,b as l,q as R,w as f,h as A,Q as L,R as M,Y as O,a7 as X,s as H,_ as Q}from"./app-dddc6b6a.js";function S(){const i=I();return{pagePassword:N(()=>{const s=i.value.password;return s?Array.isArray(s)?s:[s]:[]})}}function Y(i,g){const s=p(""),w=p(null),n=p("Locked"),u=p("请输入密码");return U(s,v=>{v.length===6&&(i.value.includes(h(h(v)))?(n.value="Unlocked",u.value="密码正确，请重稍后！",setTimeout(()=>{g("pass")},600)):(s.value="",u.value="密码错误，请重新输入！"))}),{password:s,passwordRef:w,lockIcon:n,lockText:u,focus:()=>{w.value.focus()}}}const G={class:"T-page-password"},J={key:0,class:"sign-img normal",src:"https://toby607-1317049696.cos.ap-guangzhou.myqcloud.com/images/blogs/login/normal.webp",alt:""},K={key:1,class:"sign-img greeting",src:"https://toby607-1317049696.cos.ap-guangzhou.myqcloud.com/images/blogs/login/greeting.webp",alt:""},W={key:2,class:"sign-img blindfold",src:"https://toby607-1317049696.cos.ap-guangzhou.myqcloud.com/images/blogs/login/blindfold.webp",alt:""},Z={class:"title"},ee=z({__name:"index",props:{pageData:{type:Object,default:()=>({})}},emits:["pass"],setup(i,{emit:g}){const s=i,w=j(),n=p(0),u=p(null),V=(m,e,o)=>{var t,a;if(e==="")o(new Error("请输入作者姓名"));else{const y=((a=(t=s.pageData)==null?void 0:t.frontmatter)==null?void 0:a.author)||w.value.author;e!==y&&o(new Error("作者姓名错误")),o()}},v=(m,e,o)=>{var t,a;e===""?o(new Error("请输入密码")):(h(h(e))!==((a=(t=s.pageData)==null?void 0:t.frontmatter)==null?void 0:a.password)&&o(new Error("密码输入错误")),o())},d=F({name:"",password:""}),C=F({name:[{validator:V,trigger:"blur"}],password:{validator:v,trigger:"blur"}}),D=m=>{m&&m.validate((e,o)=>{var t;if(e)$(),_.value=d.password;else{const a=Object.keys(o);H({showClose:!0,message:((t=o[a[0]][0])==null?void 0:t.message)||"请检查必填字段",type:"warning"})}})},{pagePassword:T}=S(),{password:_,passwordRef:B,lockIcon:E,focus:$}=Y(T,g);return(m,e)=>{const o=c("Xicons"),t=c("el-input"),a=c("el-form-item"),y=c("el-button"),q=c("el-form");return b(),x("div",G,[n.value===0?(b(),x("img",J)):k("v-if",!0),n.value===1?(b(),x("img",K)):k("v-if",!0),n.value===2?(b(),x("img",W)):k("v-if",!0),P("div",Z,[l(o,{icon:R(E),text:"暗号：般若波罗蜜"},null,8,["icon"])]),l(q,{model:d,rules:C,ref_key:"ruleFormRef",ref:u,class:"password-ruleForm","show-message":!1},{default:f(()=>[l(a,{prop:"name"},{default:f(()=>[l(t,{modelValue:d.name,"onUpdate:modelValue":e[0]||(e[0]=r=>d.name=r),placeholder:"请输入作者",autocomplete:"off",onFocus:e[1]||(e[1]=r=>n.value=1),onBlur:e[2]||(e[2]=r=>n.value=0)},null,8,["modelValue"])]),_:1}),l(a,{prop:"password"},{default:f(()=>[l(t,{type:"password",modelValue:d.password,"onUpdate:modelValue":e[3]||(e[3]=r=>d.password=r),placeholder:"请输入密码","show-password":"",autocomplete:"new-password",onFocus:e[4]||(e[4]=r=>n.value=2),onBlur:e[5]||(e[5]=r=>n.value=0)},null,8,["modelValue"])]),_:1}),l(a,null,{default:f(()=>[l(y,{type:"primary",onClick:e[6]||(e[6]=r=>D(u.value))},{default:f(()=>[A("进入")]),_:1})]),_:1})]),_:1},8,["model","rules"]),L(P("input",{type:"password",ref_key:"passwordRef",ref:B,"onUpdate:modelValue":e[7]||(e[7]=r=>X(_)?_.value=r:null)},null,512),[[M,!1],[O,R(_)]])])}}});const se=Q(ee,[["__file","index.vue"]]);export{se as default};
