import{H as $,v as q,k as p,l as z,S as x,s as I,U as M,g as F,r as c,o as b,c as k,e as h,b as P,a as l,u as T,w as f,d as j,M as A,a2 as H,N as L,T as O,q as S,_ as X}from"./app-ab9ebd95.js";function G(){const i=$();return{pagePassword:q(()=>{const s=i.value.password;return s?Array.isArray(s)?s:[s]:[]})}}function J(i,g){const s=p(""),w=p(null),n=p("Locked"),u=p("请输入密码");return z(s,v=>{v.length===6&&(i.value.includes(x(x(v)))?(n.value="Unlocked",u.value="密码正确，请重稍后！",setTimeout(()=>{g("pass")},600)):(s.value="",u.value="密码错误，请重新输入！"))}),{password:s,passwordRef:w,lockIcon:n,lockText:u,focus:()=>{w.value.focus()}}}const K={class:"T-page-password"},Q={key:0,class:"sign-img normal",src:"https://toby607-1317049696.cos.ap-guangzhou.myqcloud.com/images/blogs/login/normal.webp",alt:""},W={key:1,class:"sign-img greeting",src:"https://toby607-1317049696.cos.ap-guangzhou.myqcloud.com/images/blogs/login/greeting.webp",alt:""},Y={key:2,class:"sign-img blindfold",src:"https://toby607-1317049696.cos.ap-guangzhou.myqcloud.com/images/blogs/login/blindfold.webp",alt:""},Z={class:"title"},ee=I({__name:"index",props:{pageData:{type:Object,default:()=>({})}},emits:["pass"],setup(i,{emit:g}){const s=i,w=M(),n=p(0),u=p(null),V=(m,e,o)=>{var t,a;if(e==="")o(new Error("请输入作者姓名"));else{const y=((a=(t=s.pageData)==null?void 0:t.frontmatter)==null?void 0:a.author)||w.value.author;e!==y&&o(new Error("作者姓名错误")),o()}},v=(m,e,o)=>{var t,a;e===""?o(new Error("请输入密码")):(x(x(e))!==((a=(t=s.pageData)==null?void 0:t.frontmatter)==null?void 0:a.password)&&o(new Error("密码输入错误")),o())},d=F({name:"",password:""}),C=F({name:[{validator:V,trigger:"blur"}],password:{validator:v,trigger:"blur"}}),D=m=>{m&&m.validate((e,o)=>{var t;if(e)N(),_.value=d.password;else{const a=Object.keys(o);S({showClose:!0,message:((t=o[a[0]][0])==null?void 0:t.message)||"请检查必填字段",type:"warning"})}})},{pagePassword:R}=G(),{password:_,passwordRef:B,lockIcon:E,focus:N}=J(R,g);return(m,e)=>{const o=c("Xicons"),t=c("el-input"),a=c("el-form-item"),y=c("el-button"),U=c("el-form");return b(),k("div",K,[n.value===0?(b(),k("img",Q)):h("v-if",!0),n.value===1?(b(),k("img",W)):h("v-if",!0),n.value===2?(b(),k("img",Y)):h("v-if",!0),P("div",Z,[l(o,{icon:T(E),text:"暗号：般若波罗蜜"},null,8,["icon"])]),l(U,{model:d,rules:C,ref_key:"ruleFormRef",ref:u,class:"password-ruleForm","show-message":!1},{default:f(()=>[l(a,{prop:"name"},{default:f(()=>[l(t,{modelValue:d.name,"onUpdate:modelValue":e[0]||(e[0]=r=>d.name=r),placeholder:"请输入作者",autocomplete:"off",onFocus:e[1]||(e[1]=r=>n.value=1),onBlur:e[2]||(e[2]=r=>n.value=0)},null,8,["modelValue"])]),_:1}),l(a,{prop:"password"},{default:f(()=>[l(t,{type:"password",modelValue:d.password,"onUpdate:modelValue":e[3]||(e[3]=r=>d.password=r),placeholder:"请输入密码","show-password":"",autocomplete:"new-password",onFocus:e[4]||(e[4]=r=>n.value=2),onBlur:e[5]||(e[5]=r=>n.value=0)},null,8,["modelValue"])]),_:1}),l(a,null,{default:f(()=>[l(y,{type:"primary",onClick:e[6]||(e[6]=r=>D(u.value))},{default:f(()=>[j("进入")]),_:1})]),_:1})]),_:1},8,["model","rules"]),A(P("input",{type:"password",ref_key:"passwordRef",ref:B,"onUpdate:modelValue":e[7]||(e[7]=r=>O(_)?_.value=r:null)},null,512),[[H,!1],[L,T(_)]])])}}});const se=X(ee,[["__file","index.vue"]]);export{se as default};
