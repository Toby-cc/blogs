import{a1 as N,v as U,k as p,l as j,a6 as x,s as z,H as I,f as F,r as c,o as b,c as k,j as h,a as P,d as l,u as C,w as f,b as A,P as H,Q as L,Y as M,a7 as O,q as X,_ as Q}from"./app-c87b2fda.js";function S(){const i=N();return{pagePassword:U(()=>{const s=i.value.password;return s?Array.isArray(s)?s:[s]:[]})}}function Y(i,g){const s=p(""),w=p(null),n=p("Locked"),u=p("请输入密码");return j(s,v=>{v.length===6&&(i.value.includes(x(x(v)))?(n.value="Unlocked",u.value="密码正确，请重稍后！",setTimeout(()=>{g("pass")},600)):(s.value="",u.value="密码错误，请重新输入！"))}),{password:s,passwordRef:w,lockIcon:n,lockText:u,focus:()=>{w.value.focus()}}}const G={class:"T-page-password"},J={key:0,class:"sign-img normal",src:"https://toby607-1317049696.cos.ap-guangzhou.myqcloud.com/images/blogs/login/normal.webp",alt:""},K={key:1,class:"sign-img greeting",src:"https://toby607-1317049696.cos.ap-guangzhou.myqcloud.com/images/blogs/login/greeting.webp",alt:""},W={key:2,class:"sign-img blindfold",src:"https://toby607-1317049696.cos.ap-guangzhou.myqcloud.com/images/blogs/login/blindfold.webp",alt:""},Z={class:"title"},ee=z({__name:"index",props:{pageData:{type:Object,default:()=>({})}},emits:["pass"],setup(i,{emit:g}){const s=i,w=I(),n=p(0),u=p(null),V=(m,e,o)=>{var t,a;if(e==="")o(new Error("请输入作者姓名"));else{const y=((a=(t=s.pageData)==null?void 0:t.frontmatter)==null?void 0:a.author)||w.value.author;e!==y&&o(new Error("作者姓名错误")),o()}},v=(m,e,o)=>{var t,a;e===""?o(new Error("请输入密码")):(x(x(e))!==((a=(t=s.pageData)==null?void 0:t.frontmatter)==null?void 0:a.password)&&o(new Error("密码输入错误")),o())},d=F({name:"",password:""}),D=F({name:[{validator:V,trigger:"blur"}],password:{validator:v,trigger:"blur"}}),R=m=>{m&&m.validate((e,o)=>{var t;if(e)$(),_.value=d.password;else{const a=Object.keys(o);X({showClose:!0,message:((t=o[a[0]][0])==null?void 0:t.message)||"请检查必填字段",type:"warning"})}})},{pagePassword:T}=S(),{password:_,passwordRef:B,lockIcon:E,focus:$}=Y(T,g);return(m,e)=>{const o=c("Xicons"),t=c("el-input"),a=c("el-form-item"),y=c("el-button"),q=c("el-form");return b(),k("div",G,[n.value===0?(b(),k("img",J)):h("v-if",!0),n.value===1?(b(),k("img",K)):h("v-if",!0),n.value===2?(b(),k("img",W)):h("v-if",!0),P("div",Z,[l(o,{icon:C(E),text:"暗号：般若波罗蜜"},null,8,["icon"])]),l(q,{model:d,rules:D,ref_key:"ruleFormRef",ref:u,class:"password-ruleForm","show-message":!1},{default:f(()=>[l(a,{prop:"name"},{default:f(()=>[l(t,{modelValue:d.name,"onUpdate:modelValue":e[0]||(e[0]=r=>d.name=r),placeholder:"请输入作者",autocomplete:"off",onFocus:e[1]||(e[1]=r=>n.value=1),onBlur:e[2]||(e[2]=r=>n.value=0)},null,8,["modelValue"])]),_:1}),l(a,{prop:"password"},{default:f(()=>[l(t,{type:"password",modelValue:d.password,"onUpdate:modelValue":e[3]||(e[3]=r=>d.password=r),placeholder:"请输入密码","show-password":"",autocomplete:"new-password",onFocus:e[4]||(e[4]=r=>n.value=2),onBlur:e[5]||(e[5]=r=>n.value=0)},null,8,["modelValue"])]),_:1}),l(a,null,{default:f(()=>[l(y,{type:"primary",onClick:e[6]||(e[6]=r=>R(u.value))},{default:f(()=>[A("进入")]),_:1})]),_:1})]),_:1},8,["model","rules"]),H(P("input",{type:"password",ref_key:"passwordRef",ref:B,"onUpdate:modelValue":e[7]||(e[7]=r=>O(_)?_.value=r:null)},null,512),[[L,!1],[M,C(_)]])])}}});const se=Q(ee,[["__file","index.vue"]]);export{se as default};
